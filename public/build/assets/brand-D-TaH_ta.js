var i=document.getElementById("divLoading");document.addEventListener("DOMContentLoaded",function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#brandForm").on("submit",function(e){e.preventDefault(),i.style.display="flex";const a=$(this),t=a.attr("data-id");let s="",o="";t?(s="/admin/brands/"+t,o="PUT"):(s=window.routes.storeBrand,o="POST");const c=a.serialize();$.ajax({url:s,type:o,data:c,success:function(n){i.style.display="none",$("#brandModal").modal("hide"),l.ajax.reload(null,!1),Swal.fire({title:n.message,icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:r=>{r.addEventListener("mouseenter",Swal.stopTimer),r.addEventListener("mouseleave",Swal.resumeTimer)}})},error:function(n){if(i.style.display="none",n.status===422){const r=n.responseJSON.errors;let d="<ul>";$.each(r,function(m,u){d+=`<li>${u[0]}</li>`}),d+="</ul>",$("#error-messages").removeClass("d-none").html(d)}}})}),$(document).on("click",".editBrand",function(){const e=$(this).data("id"),a=$(this).data("name"),t=$(this).data("status");$("#brandForm").attr("data-id",e),$("#name").val(a),$('select[name="status"]').val(t),$("#exampleModalLabel").text("Editar Marca"),$("#brandModal").modal("show")}),$("#brandModal").on("hidden.bs.modal",function(){const e=$("#brandForm");e[0].reset(),e.removeAttr("data-id"),$("#exampleModalLabel").text("Nueva Marca"),$("#error-messages").addClass("d-none").empty()})});let l;$(document).ready(function(){l=$("#tabelBrand").DataTable({processing:!0,serverSide:!0,ajax:window.routes.brandsList,columns:[{data:"DT_RowIndex",name:"DT_RowIndex"},{data:"id",name:"id"},{data:"name",name:"name"},{data:"created_at",name:"created_at"},{data:"status",name:"status",orderable:!1,searchable:!1},{data:"acciones",name:"acciones",orderable:!1,searchable:!1}],responsive:!0})});$(document).on("click",".deleteBrand",function(){const e=$(this).data("id");Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&$.ajax({url:`${window.routes.deleteBrand}/${e}`,type:"DELETE",success:function(t){l.ajax.reload(null,!1),Swal.fire({icon:"success",title:t.message,toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})},error:function(){Swal.fire("Error","Ocurrió un error al eliminar la marca","error")}})})});

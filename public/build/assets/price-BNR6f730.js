var r=document.getElementById("divLoading");document.addEventListener("DOMContentLoaded",function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#priceForm").on("submit",function(e){e.preventDefault(),r.style.display="flex";const a=$(this),s=a.attr("data-id");let t="",d="";s?(t="/admin/prices/"+s,d="PUT"):(t=window.routes.storePrice,d="POST");const c=a.serialize();$.ajax({url:t,type:d,data:c,success:function(i){r.style.display="none",$("#priceModal").modal("hide"),l.ajax.reload(null,!1),Swal.fire({title:i.message,icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Swal.stopTimer),o.addEventListener("mouseleave",Swal.resumeTimer)}})},error:function(i){if(r.style.display="none",i.status===422){const o=i.responseJSON.errors;let n="<ul>";$.each(o,function(u,m){n+=`<li>${m[0]}</li>`}),n+="</ul>",$("#error-messages").removeClass("d-none").html(n)}}})}),$(document).on("click",".editPrice",function(){const e=$(this).data("id"),a=$(this).data("vehicle_id"),s=$(this).data("price_day"),t=$(this).data("status");$("#priceForm").attr("data-id",e),$('select[name="vehicle_id"]').val(a),$("#price_day").val(s),$('select[name="status"]').val(t),$("#exampleModalLabel").text("Editar Precio"),$("#priceModal").modal("show")}),$("#priceModal").on("hidden.bs.modal",function(){const e=$("#priceForm");e[0].reset(),e.removeAttr("data-id"),$("#exampleModalLabel").text("Nueva Precio"),$("#error-messages").addClass("d-none").empty()})});$("#priceModal").on("shown.bs.modal",function(){$(this).find(".select2bs4").each(function(){$(this).hasClass("select2-hidden-accessible")&&$(this).select2("destroy"),$(this).select2({theme:"bootstrap4",dropdownParent:$("#priceModal")})})});let l;$(document).ready(function(){l=$("#tablePrice").DataTable({processing:!0,serverSide:!0,ajax:window.routes.pricesList,columns:[{data:"DT_RowIndex",name:"DT_RowIndex"},{data:"id",name:"id"},{data:"vehicle_plate",name:"vehicle_plate"},{data:"vehicle_model",name:"vehicle_model"},{data:"price_day",name:"price_day"},{data:"created_at",name:"created_at"},{data:"used",name:"used"},{data:"status",name:"status"}],responsive:!0,language:{emptyTable:"No hay datos disponibles en la tabla"}})});

var d=document.getElementById("divLoading");document.addEventListener("DOMContentLoaded",function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#typeForm").on("submit",function(e){e.preventDefault(),d.style.display="flex";const t=$(this),a=t.attr("data-id");let o="",r="";a?(o="/admin/types/"+a,r="PUT"):(o=window.routes.storeType,r="POST");const c=t.serialize();$.ajax({url:o,type:r,data:c,success:function(n){d.style.display="none",$("#typeModal").modal("hide"),l.ajax.reload(null,!1),Swal.fire({title:n.message,icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",Swal.stopTimer),s.addEventListener("mouseleave",Swal.resumeTimer)}})},error:function(n){if(d.style.display="none",n.status===422){const s=n.responseJSON.errors;let i="<ul>";$.each(s,function(m,u){i+=`<li>${u[0]}</li>`}),i+="</ul>",$("#error-messages").removeClass("d-none").html(i)}}})}),$(document).on("click",".editType",function(){const e=$(this).data("id"),t=$(this).data("name"),a=$(this).data("status");$("#typeForm").attr("data-id",e),$("#name").val(t),$('select[name="status"]').val(a),$("#exampleModalLabel").text("Editar Marca de Vehículo"),$("#typeModal").modal("show")}),$("#typeModal").on("hidden.bs.modal",function(){const e=$("#typeForm");e[0].reset(),e.removeAttr("data-id"),$("#exampleModalLabel").text("Nueva Nuevo Tipo de Vehículo"),$("#error-messages").addClass("d-none").empty()})});let l;$(document).ready(function(){l=$("#tableType").DataTable({processing:!0,serverSide:!0,ajax:window.routes.typesList,columns:[{data:"DT_RowIndex",name:"DT_RowIndex"},{data:"id",name:"id"},{data:"name",name:"name"},{data:"created_at",name:"created_at"},{data:"status",name:"status",orderable:!1,searchable:!1},{data:"acciones",name:"acciones",orderable:!1,searchable:!1}],responsive:!0})});$(document).on("click",".deleteType",function(){const e=$(this).data("id");Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&$.ajax({url:`${window.routes.deleteType}/${e}`,type:"DELETE",success:function(a){l.ajax.reload(null,!1),Swal.fire({icon:"success",title:a.message,toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})},error:function(){Swal.fire("Error","Ocurrió un error al eliminar el Tipo","error")}})})});
